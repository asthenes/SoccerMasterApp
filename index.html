<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>SoccerMasterApp</title>
	<meta name="description" content="Documentation for SoccerMasterApp">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">SoccerMasterApp</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>SoccerMasterApp</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#soccermaster-app" id="soccermaster-app" style="color: inherit; text-decoration: none;">
					<h1>SoccerMaster App</h1>
				</a>
				<p>This is a simple app that takes in streaming data from pipes, redirects, or file paths and attempts to get results for a soccer league.
				It&#39;s built using typescript and node.js, tests with jest, and uses yarn for package management. I developed it in WSL (Windows Subsystem for Linux) using VS Code so it should run on OS X / Unix</p>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting Started</h2>
				</a>
				<pre><code class="language-bash"><span style="color: #008000"># Install dependencies and build</span>
<span style="color: #000000">yarn install</span>
<span style="color: #000000">yarn build</span>

<span style="color: #008000">#CLI help is available but its basically the same info as below</span>
<span style="color: #000000">yarn cli --help</span>

<span style="color: #008000"># If no filepath is provided after -f, it will prompt for one</span>
<span style="color: #000000">yarn cli -f </span>
<span style="color: #000000">yarn cli -f &lt;path to your file&gt;</span>

<span style="color: #008000"># You can redirect files in this way also</span>
<span style="color: #000000">yarn cli &lt; &lt;path to your file&gt;</span>

<span style="color: #008000"># And you can pipe in data from an app</span>
<span style="color: #000000">node &lt;your app&gt; | yarn cli</span>

<span style="color: #008000"># Here are the full commands I used to test all of the above</span>
<span style="color: #000000">yarn cli -f assets/sample-input.txt</span>
<span style="color: #000000">yarn cli &lt; assets/sample-input.txt</span>

<span style="color: #008000"># Have to use node instead of ts-node to pipe in apps or it will print info at the beginning and try to take it as args. this app will pipe in larger text file thats just 100 lines of the sample-input.txt</span>
<span style="color: #000000">node dist/tsc/src/inputTestApp.js | yarn cli</span>

<span style="color: #008000"># On invalid lines it will console.warn() and move to the next line.</span>
<span style="color: #000000">yarn cli &lt; assets/sample-input-witherrors.txt</span>

<span style="color: #008000"># This app also uses lint and jest, which can be ran with the commands below.</span>
<span style="color: #000000">yarn lint</span>
<span style="color: #000000">yarn </span><span style="color: #795E26">test</span>
<span style="color: #000000">...</span>
</code></pre>
				<a href="#design-thoughts" id="design-thoughts" style="color: inherit; text-decoration: none;">
					<h2>Design thoughts</h2>
				</a>
				<p>Going into this I wasn&#39;t really sure how typescript apps are typically structured, so I settled for splitting things up similar to how I was taught to code at Amazon. For some of the setup I used a generic template off github that had some preset package.json stuff so that I wouldn&#39;t have to figure that out from scratch. All in a all a good learning experience though.</p>
				<p>The entrypoint for this app is cli.ts. It has one argument (-f) which designates whether a file will be loaded or not. Leaving this argument out will cause the program to hang while it waits to get input from STDIN, such as when piping data in from a separate app (like inputTestApp.ts)</p>
				<p>To read the file or STDIN line by line I use a readline.Interface listening for &#39;line&#39; events. I split the function responsible for creating this interface into its own module for testing purposes. It takes 2 optional args that indicate what type of input to expect, or if it needs to prompt for a file path. I thought about just made it mandatory to provide a file path on start if specifying (-f) but I wanted the app to work either way.</p>
				<p>After figuring out the interface, the app tries to read an incoming line. The first step it takes is to try and split the incoming line into separate variables using the saveMatchDetails function. This is so that the match string can be validated and its separate parts used to make sorted arrays to figure out the winner (or if its a tie)</p>
				<p>Validation for the match string involves ensuring it has 2 teams, 2 scores, and that its formatted like &#39;team name&#39; -&gt; &#39;score&#39; with the number at the end. </p>
				<p>Most of the logic for printing out matchday info hinges on the map&lt;string, number&gt; used to track each teams points as the match days progress, and a string array that tracks what teams have been seen for that match day.</p>
				<p>Once saveMatchDetails() has sorted the team names by their score, we check if they are in the list used to track matchday progress. If they are, we print that matchday, if not we add them in and continue to assigning them points. Point assignment works the same way but for the map. Set the team name and its score to whatever its current score is + the points it won (3 for win, 1 for tie)</p>
				<p>when the readInterface runs out of lines it has a close event that we listen for to print out whatever is left for the last matchday.</p>
				<p>There are some other small bits of logic in the utils package, like when we prompt for a file, theres an extra function that validates that it exists, and if not, we console.log the failure and then call main with a (-f) arg again so that it will go back through the file prompt function.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-function">
						<a href="modules.html#main" class="tsd-kind-icon">main</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>